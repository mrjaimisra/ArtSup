<%= render partial: "layouts/navbar" %>

<%= render partial: "layouts/dashboard_tabs" %>

<div class="container">
  <div class="row collections-list">
      <h4>
        <%= link_to "Add A Collection", new_users_collection_path(current_user) %>
      </h4>
  </div>

  <% @collections.map do |collection| %>
    <div class="collections-list">
      <div class="row">
        <div class="col-md-3">
          <h3><%= link_to collection.title, users_collection_path(params[:user], collection) %> </h3>
        </div>

        <div class="col-md-6">
          <h3>Pieces: <%= link_to collection.pieces.count, users_collection_path(params[:user], collection) %></h3>
        </div>

        <div class="col-md-3">
          <h3>Support me by:</h3>
        </div>
      </div>

      <div class="row">
        <div class="collections-title col-md-3">
          <%= image_tag collection.image.url(:medium), class: "img-responsive" %>

          <% if collection.user_id == params[:user].to_i %>
            <h4>
              <%= link_to "Add Piece to Collection", new_users_collection_piece_path(current_user, collection) %>
              <br/>
              <br/>
              <%= link_to "Edit Collection", edit_users_collection_path(current_user, collection.id) %>
            </h4>
          <% end %>

          <br/>
        </div>

        <div class="col-md-6 three-content">
          <% collection.pieces.limit(8).map do |piece| %>
            <div class="col-md-3 thumbnail">
              <%= piece.name %>
              <%= image_tag piece.image.url(:thumb), class: "img-responsive current-collection-images thumbnail-image" %> <br/>
            </div>
          <% end %>
        </div>

        <div class="col-md-3"></div>
        <div class="col-md-3">
          <%= collection.description %>
        </div>

      </div>
    </div>
  <% end %>
</div>